{% extends "base.html" %}
{% block title %}Inventory{% endblock %}
{% block content %}



<div style="width: 50%;
    max-width: 100%;
    margin: 36px auto 0 auto;
    background: rgba(25, 25, 40, 0.98);
    border-radius: 22px;
    box-shadow: 0 4px 24px #8be9fd33, 0 1.5px 0 #8be9fd22 inset;
    padding: 32px 32px 24px 32px;
    border: 1.5px solid #8be9fd44;
    color: #f5f6fa;
    font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
    text-align: center;
    position: relative;
    overflow: hidden;
    box-sizing: border-box;">
    <h1 style="color: #8be9fd;
    font-size: 1.5em;
    font-weight: 900;
    align-self: center;
    letter-spacing: 1px;
    margin-bottom: 24px;
    font-family: 'Oswald', 'Cinzel', serif;
    text-shadow: 0 2px 12px #23243a;"><i class="fa-solid fa-boxes-stacked"></i>Your Inventory</h1>
    {% if equipped_gun %}
    <div style="background:#35374a; color:#fff; padding:16px; margin-bottom:20px; border-radius:8px;">
        <h4 style="color:#ffd700;">Equipped Gun</h4>
        <p>
            <strong>{{ equipped_gun.name }}</strong> - {{ equipped_gun.damage }} damage<br>
            <small style="color:#8be9fd;">Currently equipped</small>
        </p>
        <form method="POST" action="{{ url_for('inventory') }}">
            <input type="hidden" name="item_id" value="{{ equipped_gun.id }}">
            <button type="submit" class="btn btn-danger btn-sm">Sell for ${{ equipped_gun.price // 2 }}</button>
        </form>
    </div>
    {% endif %}

    {% for entry in inventory_items %}
    <div style="background:#2a2b3d; color:#fff; padding:12px 16px; margin-bottom:10px; border-radius:8px; display:flex; justify-content:space-between; align-items:center;">
        <div>
            <strong>{{ entry.item.name }}</strong> (x{{ entry.quantity }})<br>
            <small style="color:#8be9fd;">Original Price: ${{ entry.item.price }}</small>
        </div>
        <form method="POST" action="{{ url_for('inventory') }}">
            <input type="hidden" name="item_id" value="{{ entry.item.id }}">
            <button type="submit" class="btn btn-warning btn-sm">Sell for ${{ entry.item.price // 2 }}</button>
        </form>
    </div>
    {% else %}
    <p style="text-align:center; color:#aaa;">You have no items in your inventory.</p>
    {% endfor %}
</div>
<script>
    if (current_user.gun_id== (item.gun_id)) {
        flash("You can't sell your currently equipped gun.", "danger")
        return redirect(url_for('inventory'))
    }
</script>
{% endblock %}