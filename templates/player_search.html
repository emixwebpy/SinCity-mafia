{% extends "base.html" %}
{% block title %}Player Search{% endblock %}
{% block content %}
<div class="inventory-container" style="max-width:500px;">
    <div class="inventory-title"><i class="fas fa-search"></i> Search for Players</div>
    <form method="post" class="mb-3">
        <input type="text" name="query" value="{{ query }}" class="form-control" placeholder="Enter username..." required>
        <button type="submit" class="btn btn-primary mt-2">Search</button>
    </form>
    {% if results %}
        <ul class="inventory-list">
        {% for user in results %}
            <li class="inventory-item" style="display:flex;align-items:center;justify-content:space-between;">
                <div>
                    <a href="{{ url_for('profile', username=user.username) }}" style="color:#8be9fd;font-weight:700;">{{ user.username }}</a>
                    <span style="color:#b8b8ff;">(Level {{ user.level }}, Health: {{ user.health }})</span>
                </div>
                {% if current_user.gun_id and user.health > 0 %}
                <form action="{{ url_for('kill', username=user.username) }}" method="post" style="margin:0;">
                    <button type="submit" class="btn btn-danger btn-sm">Shoot</button>
                </form>
                {% elif user.health <= 0 %}
                    <span style="color:#c00;font-size:0.95em;">Dead</span>
                {% else %}
                    <span style="color:#888;font-size:0.95em;">No gun</span>
                {% endif %}
            </li>
        {% endfor %}
        </ul>
    {% elif query %}
        <div class="inventory-empty">No players found.</div>
    {% endif %}
</div>
{% endblock %}